<section class="dashboard-header">
  <h2>Organizer Workspace</h2>
  <p>Create events, publish them, and monitor revenue + attendance in one place.</p>
</section>

<div *ngIf="loading" class="loader"></div>

<div class="stats-grid">
  <article class="card metric-card">
    <h3>Total Events</h3>
    <p>{{ events.length }}</p>
  </article>
  <article class="card metric-card">
    <h3>Published</h3>
    <p>{{ publishedCount }}</p>
  </article>
</div>

<section class="card">
  <h3>Create Event</h3>
  <div class="form-grid">
    <input [(ngModel)]="title" placeholder="Event title" />
    <input [(ngModel)]="location" placeholder="Location" />
    <textarea [(ngModel)]="description" placeholder="Describe your event"></textarea>
    <label class="inline-toggle">
      <input type="checkbox" [(ngModel)]="paid" /> Paid event
    </label>
    <input *ngIf="paid" type="number" [(ngModel)]="fee" placeholder="Fee" />
    <button class="btn-primary" (click)="createEvent()">Create Draft</button>
  </div>
  <p class="msg">{{ message }}</p>
</section>

<section class="card" *ngIf="selectedStats">
  <h3>Event Stats</h3>
  <p>Total Registrations: <strong>{{ selectedStats.totalRegistrations }}</strong></p>
  <p>Paid Registrations: <strong>{{ selectedStats.paidRegistrations }}</strong></p>
  <p>Attendance Marked: <strong>{{ selectedStats.attendanceCount }}</strong></p>
  <p>Revenue: <strong>₹{{ selectedStats.revenue }}</strong></p>
</section>

<section class="card" *ngFor="let event of events">
  <h3>{{ event.title }}</h3>
  <p>{{ event.description }}</p>
  <p><strong>Location:</strong> {{ event.location }}</p>
  <p><strong>Fee:</strong> {{ event.paid ? ('₹' + event.fee) : 'Free' }}</p>

  <span class="badge" [ngClass]="event.status === 'PUBLISHED' ? 'badge-published' : 'badge-draft'">
    {{ event.status }}
  </span>

  <div class="actions">
    <button *ngIf="event.status === 'DRAFT'" (click)="publish(event.eventId)" class="btn-success">Publish</button>
    <button class="btn-primary" (click)="viewStats(event.eventId)">View Stats</button>
  </div>
</section>
